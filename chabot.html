<!DOCTYPE html>
<html>
  <head>
    <title>Chatbot</title>
  </head>
  <body>
    <div class="js-container"></div>

    <script src="https://unpkg.com/supersimpledev/react.js"></script>
    <script src="https://unpkg.com/supersimpledev/react-dom.js"></script>

    <script src="https://unpkg.com/supersimpledev/babel.js"></script>
    <script type="text/babel">

      // Input Component
      function ChatInput({ chatMessages, setChatMessage}){

        const [inputText, setInputText] = React.useState('')

        function fetchMessage(event){
          setInputText(event.target.value);
        }


        // fetch chatmessage using the spread operator (...)
        function sendMessage(){
          setChatMessage([
            ...chatMessages,
            {
              message: inputText,
              sender: 'user',
              id: crypto.randomUUID()
            }
          ])

          setInputText('');
        }



        return(
          <>
           <input placeholder="Send a message to Chatbot" size="30" 
             onChange={fetchMessage}
             value={inputText}
           />
           <button
             onClick={sendMessage}
           >Send</button>
          </>
        )
      }

      // Chat Component
      function ChatMessage({message, sender}){
        return(
          <div>
           {sender === "robot" && (<img src="robot.png" width="50" />)}
           {message}
           {sender === "user" && (<img src="user.png" width="50" />)}
          </div>
        )
      }

      // Chat Messages Component
      function ChatMessages({chatMessages}){ 
          return(
           <>
              {chatMessages.map((chatMessage)=>{
                  return(
                      <ChatMessage 
                        message={chatMessage.message}
                        sender={chatMessage.sender}
                        key={chatMessage.id}
                      />
                    )
              })}
            </>
          );
      }

      // Main App Component
      function App(){
        // add chatmessage in use state and save usestate in an array variable
        const [ chatMessages, setChatMessage] = React.useState([{
              message: 'hello chatbot',
              sender: 'user',
              id: 'id1'
            }, {
              message: 'Hello! How can I help you?',
              sender: 'robot',
              id: 'id2'
            }, {
              message: 'what is todays date',
              sender: 'user',
              id: 'id3'
            }, {
              message: 'Today is December 15',
              sender: 'robot',
              id: 'id4'
            }, {
              message: 'how about flip coin',
              sender: 'user',
              id: 'id5'
            }, {
              message: 'Sure! You got tails',
              sender: 'robot',
              id: 'id6'
            }, {
              message: 'okay',
              sender: 'user',
              id: 'id7'
            }]);
        //  const chatMessages = array[0];
        //  const setChatMessage = array[1];
        


        return(
           <>
            <ChatInput 
               chatMessages={chatMessages}
               setChatMessage={setChatMessage}
            />
            <ChatMessages 
              chatMessages={chatMessages}
            />
           </>
         );
      }

     
      const container = document.querySelector('.js-container');
      ReactDOM.createRoot(container).render(<App />)

    </script>
  </body>
</html>